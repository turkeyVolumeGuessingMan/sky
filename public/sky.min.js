var r={3027034:"I'm blue da ba dee.\r\n\r\n#!spring wine\r\n\r\n> Go North @northWalk",2018526348:"You read a book.\r\n\r\n#spring wine\r\n\r\n\r\n> Read blue @blue\r\n\r\n> Go North @northWalk","-313424166":"You walk north.\r\n\r\nThen east. ? (spring wine) => { You have the spring wine. } Then you go west.\r\n\r\n> Walk into the storm @stormBegins\r\n\r\n> Read book @start/readBook","-1120101400":"You walk north in the storm.\r\n\r\n? (spring wine) => {\r\n    You have the spring wine.\r\n}\r\n\r\n> Read book @start/readBook","-474174766":"The storm begins.\r\n\r\n$northWalk/storm\r\n\r\n> Read a book @start","-1617690810":"Hello world *again*\r\n\r\n\r\n> Go North @northWalk\r\n\r\n> Read Book @readBook"};const a=r=>{const n=r=>{var n=document.createElement("button");const[e,t]=r.replace(">","").split("@");return n.textContent=e.trim(),n.onclick=()=>{var r,n,e;r=(r=(r=t).trim()).toLowerCase(),(e=p.node.split("/"))&&(e.pop(),e.push(r),n=s(e.join("/")),p[n]?o(e.join("/")):o(r))},n};r=r.split("\n");return[r.map(r=>">"===r[0]?n(r):null).filter(r=>r),r.filter(r=>">"!==r[0]).join("\n")]};function s(r){var n=0;if(0!=r.length)for(i=0;i<r.length;i++)n=(n<<5)-n+(char=r.charCodeAt(i)),n&=n;return n}window.addEventListener("load",()=>{p={...r},o("start")});let p={};const l=(r,n=!1)=>{let e=0;const t=n?"div":"p";return r.split("\n").map(r=>r.trim()).join("\n").split("\n\n").filter(r=>""!==r).map(r=>`<${t}>${(t=>{const o={quote:!0,bold:!0,italic:!0};var r=(r,n,e)=>{for(;-1<t.indexOf(r);)t=o[n]?t.replace(r,`<${e}>`):t.replace(r,`</${e}>`),o[n]=!o[n]},n=(n,e)=>t=t.split("\n").map(r=>0===r.trimStart().indexOf(n)?`<${e}>${r.replace(n,"")}</${e}>`:r).join("\n");for(n("#### ","h4"),n("### ","h3"),n("## ","h2"),n("# ","h1");-1<t.indexOf("[[");)t=e%2==0?t.replace("[[","&ldquo;"):t.replace("[[","&lsquo;"),e+=1;for(;-1<t.indexOf("]]");)--e,t=e%2==0?t.replace("]]","&rdquo;"):t.replace("]]","&rsquo;");for(r("``","quote","q"),r('"',"quote","q"),r("**","bold","b"),r("*","italic","i");-1<t.indexOf("'");)t=t.replace("'","&rsquo;");return t=t.trim()})(r)}</${t}>`).join("")};function o(r){r=r.toLowerCase();var n=p[r+"-state"]??"main",e=s(r+"/"+n);let t="";p.base=r,t=p[e]?(p.node=r+"/"+n,p[e]):(n=s(r),p.node=r,p[n]),t=d(t);var[e,r]=a(t);{n=e,e=r,r=document.getElementById("page");const o=document.getElementById("btns");r.innerHTML=l(e),o.innerHTML="",n.map(r=>o.appendChild(r))}}const d=n=>{const e=/\?\s*\((.*)\)\s*=>\s\{([^<>]*)\}/gm,t=r=>{var n;return-1<(r=r.trim()).indexOf("!")?(n=s(r=r.replace("!")),!p[n]):(n=s(r),p[n])};{let r=[...n.matchAll(e)];for(;0<r.length;){var o=r[0],[a,i,l]=o,o=o.index;n=n.replace(a,""),a=i,t(a)&&(n=n.slice(0,o)+l+n.slice(o,n.length)),r=[...n.matchAll(e)]}n=n.split(/\r?\n/).map(e=>{if("#"===e[0]){let r=!0,n=e.trim();-1<(n=n.replace("#","")).indexOf("!")&&(r=!1,n=n.replace("!",""));var t=s(n);return p[t]=r,""}if("$"!==e[0])return e;{let r=e.trim();t=(r=(r=r.replace("$","")).split("/")).pop(),e=(r.join("/")+"-state").toLowerCase();return p[e]=t,""}}).join("\n").trim()}return n};